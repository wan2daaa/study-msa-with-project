# 모놀리스의 배경과 종류

- msa 가 뭔지 이해할려면 과거의 모놀리스를 이해해 보아야 msa가 모놀리스의 어떤 단점을 해결한건지 이해하기 위해 

## 모놀리스 아키텍처
- MSA라는 용어가 생기기전에는 존재하지 않았다
- 기본적으로 **모든 종류의 서비스가 하나의 어플리케이션으로 구성되어 있는 아키텍처**를 의미

### 특징
- 하나의 주요 프로세스로 구성 (하나의 서버에서 하나의 프로세스로 모두 사용하는 것)
- 모든 서비스가 하나의 DB endpoint 를 사용
  - DB가 문제가 생기면 한번에 모두 죽어버리는 상황이 있음
- 단 한줄만 코드 수정이 되더라도, 모든 어플리케이션의 재배포가 필요
- 싱글 혹은 멀티 모듈로 구성할 수는 있지만, CI의 단위가 달라질 뿐, CD(배포)의 범위는 여전히 전체

### 모놀리스 아키텍처가 General 했던 이유
- 쉬워서
  - 개발하고 빌드(강타입 - 컴파일) 하고 그렇게 나온 Output(class file ...)을 서버에서 Run 만 거치면 끝나기 때문 
- No Time, No Human Resource
  - 고려할 게 그렇게 많지 않아요.
  - 서버 리소스의 효율적인 활용이 가능해요
- IDC.Server/DB 가 너무 비쌈
  - IDC(온프레미스 환경)가 일반적이였고, 굉장히 비싼 자원


### 배포중 단점
- Graceful, Warm up 이 어렵다.

## 싱글모듈 / 멀티모듈 아키텍처 

- 모놀리식 아키텍처에서 모듈을 구성하는 방식이 다르다.
- 대표적으로 싱글/멀티 모듈 아키텍처가 존재하고 특징이 조금 다르다.

### 싱글모듈 
- 모든 소스가 단일 모듈 내에서 존재
- 응집성과 결합도가 매우 높다
- 설계/구현이 간단하고 단순
- 최상위 실글 패키지
- 유연성, 확장성이 제한적

### 멀티모듈
- 역할, 서비스 별로 모듈화 되어있음
- 응집성과 결합도가 낮은 편
- 모듈간 인터페이스 정의 필요
  - 아키텍처와도 밀접한 관련
- 최상위 멀티 패키지
- 유연성, 확장성이 비교적 좋다, 결국 둘다 모놀리식이라서 결국 모두 배포해야되서 안좋음



---

## 모놀리스의 장점
- 쉽다, 간단하다
- 배포도 간단하다
- 어디서 패키징해도 상관 없고, 어떻게든 배포만 하면 된다
- 유지보수가 비교적 쉽다
- 비싼 서버 리소스를 최적화해서 사용이 가능!
- 공통 모듈등을 활용하기가 매우 쉽다.

### 모놀리스 아키텍처를 채용하는게 장점이 될 수 있는 경우
- 창업 혹은 새로운 서비스를 시작하는 경우
- 소수의 팀원으로 빠르게 오픈해야 하는 경우 (협업이 적을 수 있는 경우)
- 클라우드 환경을 사용하기 어려운 경우
- 금융 등 보안과 안정성이 최고로 중요한 경우
- 개발자들의 역량이 비교적 낮을 경우
- Devops 등 전문 인력이 부족할 경우
  - CI/CD 파이프라인 등의 구축이 어려울 경우

---
## 모놀리스의 단점
- 수평 확장이 너무 어렵다. (Scale Out)
  - 단일 DB에 대한 의존성이 너무 크다
- 모놀리식 환경이 보편화되고, 시스템이 커질 수록 커뮤니케이션 코스트가 기하급수적으로 늘어난다.
- 규모가 커질 수록, 복잡성이 증가하여 수정에 대한 부담 증가
- 대규모 어플리케이션 환경에서는 단순한 수정 사항일지라도, 배포까지 시간이 오래걸릴 수 있다.
- 장애 시, 전체 어플리케이션에 영향을 크게 받게된다.

## 모놀리스 아키텍처를 채용하는게 단점이 될 수 있는 경우
- MSA, Cloud 환경에 충분히 숙련된 개발자들이 많은 경우
- 많은 서비스가 식별이 되어, 동시 다발적으로 개발을 진행하는 경우
- 보안과 안정성 보다는 빠른 기능 개발과 배포가 중요한 서비스 
- Devops 등 전문 인력이 충분하고, 개발자들이 CI/CD 파이프라인에 대해서 어느정도 이해가 있는 경우

### 그래서 결론은? 
- 유명한 기업들의 공통점은 원하는 기능을 되게 빨리 개발한다.
- 왜냐하면 큰 기능은 MSA로 되어있다.
- 빠르게 해서 그 고객들의 니즈를 만족시키는게 중요하기 때문
- MSA가 무조건 좋은건 아니지만, 산업 환경이 그래서 배우자