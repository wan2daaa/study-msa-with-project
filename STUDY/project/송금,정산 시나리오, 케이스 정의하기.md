# 사용자 입장 송금 시나리오, 케이스 정의하기 

### 전제 
- 계좌 등록이 완료된 정상 상태의 고객이 있다
- 패캠페이와 연계된 은행이 있다
- 패캠페이 회원 뿐만 아니라, 외부 은행 계좌로도 송금이 가능하다
- 송금 수수료가 존재한다
- 패캠페이 법인 계좌에는 충분한 금액이 존재한다.

### 조건 (When - 행동)
- 고객의 패캠머니와 연계된 계좌의 잔액은 송금하고자 하는 금액과 수수료의 합보다 많다
- 외부 은행 계좌는 모두 펌뱅킹 계약 및 시스템 연계가 되어 있다.
- 고객은 타 고객 또는 외부 은행 계좌에 송금 요청을 한다.

### 결과
- 타 고객의 패캠머니가 송금하고자 했던 금액만큼 충전된다.
- 외부 은행 계좌로부터 정상 송금처리 응답을 받는다. 

# 사용자 입장 정산 시나리오, 케이스 정의하기

### 전제 
- 계좌 등록이 완료된 정상 상태의 고객이 있다
- 계좌 등록이 완료된 가맹점주가 있다.
- 정상 처리 된, 결제 전표가 1개 이상 존재한다.
- 결제 수수료가 존재한다
- 패캠페이 법인 계좌에는 충분한 금액이 존재한다.

### 조건 (When - 행동)
- 주기적으로 정산을 위한 작업이 실행된다.
- 정상처리 된 전표를 계산하여, 정산 완료된 금액에서, 결제 수수료만큼 제한 금액이 패캠페이로부터 가맹점주 계좌로 송금 요청한다.

### 결과
- 1개 이상의 정상 처리 된 결제 건들의 전표 금액의 총합 만큼 사전 등록된 가맹점주의 계좌로 이체된다


